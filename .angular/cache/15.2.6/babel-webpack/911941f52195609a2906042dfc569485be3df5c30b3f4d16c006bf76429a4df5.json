{"ast":null,"code":"import { List } from '../../../model/list/list.model';\nimport { BoardModel } from '../../../model/board/board.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../service/board/local/local.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../list/list.component\";\nimport * as i5 from \"../../../search-filter.pipe\";\nfunction BoardComponent_app_list_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-list\", 12);\n    i0.ɵɵlistener(\"deleteList\", function BoardComponent_app_list_10_Template_app_list_deleteList_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.deleteList($event));\n    })(\"moveCardAcrossList\", function BoardComponent_app_list_10_Template_app_list_moveCardAcrossList_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.moveCardAcrossList($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const list_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    i0.ɵɵproperty(\"listIndex\", i_r2)(\"list\", list_r1);\n    i0.ɵɵattribute(\"listIndex\", i_r2);\n  }\n}\nexport class BoardComponent {\n  constructor(localService, formBuilder) {\n    this.localService = localService;\n    this.formBuilder = formBuilder;\n    this.searchForm = this.formBuilder.group({\n      search: ''\n    });\n  }\n  ngOnInit() {\n    const board = this.localService.getBoard();\n    this.lists = board.lists || [{\n      \"id\": '1',\n      \"cards\": [],\n      \"position\": 1,\n      \"name\": \"Todo\"\n    }, {\n      \"id\": '2',\n      \"cards\": [],\n      \"position\": 2,\n      \"name\": \"InProgress\"\n    }, {\n      \"id\": '3',\n      \"cards\": [],\n      \"position\": 3,\n      \"name\": \"Completed\"\n    }];\n    // ideally retrive and initialize from some storage.\n  }\n\n  addList() {\n    const newList = new List();\n    newList.position = this.lists.length + 1;\n    newList.name = `List #${newList.position}`;\n    if (this.lists === undefined) {\n      this.lists = [];\n    }\n    this.lists.push(newList);\n    console.log(this.lists);\n  }\n  moveCardAcrossList(movementInformation) {\n    const cardMoved = this.lists[movementInformation.fromListIdx].cards.splice(movementInformation.fromCardIdx, 1);\n    this.lists[movementInformation.toListIdx].cards.splice(movementInformation.toCardIdx, 0, ...cardMoved);\n  }\n  saveBoard() {\n    const boardModel = new BoardModel();\n    boardModel.lists = this.lists;\n    this.localService.saveBoard(boardModel);\n  }\n  deleteList(listIndex) {\n    this.lists.splice(listIndex, 1);\n  }\n}\nBoardComponent.ɵfac = function BoardComponent_Factory(t) {\n  return new (t || BoardComponent)(i0.ɵɵdirectiveInject(i1.LocalService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n};\nBoardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BoardComponent,\n  selectors: [[\"app-board\"]],\n  decls: 15,\n  vars: 5,\n  consts: [[1, \"container\", 2, \"max-width\", \"inherit\", \"width\", \"auto\", \"height\", \"100%\"], [1, \"row\"], [1, \"col-11\"], [1, \"flex\", \"justify-content-end\", \"align-content-center\", \"py-3\", \"pr-5\"], [1, \"bg-blue-600\", \"text-white\", \"py-2\", \"px-3\", \"border-round-md\", \"outline-none\", 2, \"border\", \"0\", 3, \"click\"], [1, \"card\", 2, \"height\", \"inherit\"], [3, \"formGroup\"], [\"formControlName\", \"search\"], [1, \"flex\", \"gap-3\", \"card-container\", \"overflow-x-auto\", \"pb-4\"], [3, \"listIndex\", \"list\", \"deleteList\", \"moveCardAcrossList\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex-1\", 2, \"margin\", \"10px\", \"padding\", \"15px\", \"padding-top\", \"15px\", \"padding-bottom\", \"15px\"], [1, \"text-center\", \"add-new-list\", 3, \"click\"], [3, \"listIndex\", \"list\", \"deleteList\", \"moveCardAcrossList\"]],\n  template: function BoardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵelement(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3)(4, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function BoardComponent_Template_button_click_4_listener() {\n        return ctx.saveBoard();\n      });\n      i0.ɵɵtext(5, \"Save\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"form\", 6);\n      i0.ɵɵelement(8, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 8);\n      i0.ɵɵtemplate(10, BoardComponent_app_list_10_Template, 1, 3, \"app-list\", 9);\n      i0.ɵɵpipe(11, \"searchFilter\");\n      i0.ɵɵelementStart(12, \"div\", 10)(13, \"h6\", 11);\n      i0.ɵɵlistener(\"click\", function BoardComponent_Template_h6_click_13_listener() {\n        return ctx.addList();\n      });\n      i0.ɵɵtext(14, \"Add new item...\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"formGroup\", ctx.searchForm);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(11, 2, ctx.lists, ctx.searchForm.value.search));\n    }\n  },\n  dependencies: [i3.NgForOf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i4.ListComponent, i5.SearchFilterPipe],\n  styles: [\".text-center.add-new-list[_ngcontent-%COMP%]:hover {\\n  opacity:0.9;\\n  color:#40409A;\\n}\\n\\n.text-center.add-new-list[_ngcontent-%COMP%] {\\n  font-size:14px;\\n  color:#767676;\\n  cursor:pointer;\\n  opacity:0.4;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9ib2FyZC9ib2FyZC9ib2FyZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVztFQUNYLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxhQUFhO0VBQ2IsY0FBYztFQUNkLFdBQVc7QUFDYiIsInNvdXJjZXNDb250ZW50IjpbIi50ZXh0LWNlbnRlci5hZGQtbmV3LWxpc3Q6aG92ZXIge1xuICBvcGFjaXR5OjAuOTtcbiAgY29sb3I6IzQwNDA5QTtcbn1cblxuLnRleHQtY2VudGVyLmFkZC1uZXctbGlzdCB7XG4gIGZvbnQtc2l6ZToxNHB4O1xuICBjb2xvcjojNzY3Njc2O1xuICBjdXJzb3I6cG9pbnRlcjtcbiAgb3BhY2l0eTowLjQ7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,IAAI,QAAuB,gCAAgC;AAGpE,SAASC,UAAU,QAAQ,kCAAkC;;;;;;;;;;ICSvDC,EAAA,CAAAC,cAAA,mBAGiC;IAHvBD,EAAA,CAAAE,UAAA,wBAAAC,mEAAAC,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAP,EAAA,CAAAQ,aAAA;MAAA,OAAcR,EAAA,CAAAS,WAAA,CAAAF,MAAA,CAAAG,UAAA,CAAAN,MAAA,CAAkB;IAAA,EAAC,gCAAAO,2EAAAP,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAAC,GAAA;MAAA,MAAAM,MAAA,GAAAZ,EAAA,CAAAQ,aAAA;MAAA,OAAuBR,EAAA,CAAAS,WAAA,CAAAG,MAAA,CAAAC,kBAAA,CAAAT,MAAA,CAA0B;IAAA,EAAjD;IAGVJ,EAAA,CAAAc,YAAA,EAAW;;;;;IADlCd,EAAA,CAAAe,UAAA,cAAAC,IAAA,CAAe,SAAAC,OAAA;IACfjB,EAAA,CAAAkB,WAAA,cAAAF,IAAA,CAAsB;;;ADHtC,OAAM,MAAOG,cAAc;EAMzBC,YAAoBC,YAA0B,EAAUC,WAAwB;IAA5D,KAAAD,YAAY,GAAZA,YAAY;IAAwB,KAAAC,WAAW,GAAXA,WAAW;IACjE,IAAI,CAACC,UAAU,GAAG,IAAI,CAACD,WAAW,CAACE,KAAK,CAAC;MACvCC,MAAM,EAAE;KACT,CAAC;EACJ;EAEAC,QAAQA,CAAA;IAEN,MAAMC,KAAK,GAAG,IAAI,CAACN,YAAY,CAACO,QAAQ,EAAE;IAC1C,IAAI,CAACC,KAAK,GAAGF,KAAK,CAACE,KAAK,IAAG,CACrB;MACE,IAAI,EAAE,GAAG;MACT,OAAO,EAAE,EAAE;MACX,UAAU,EAAE,CAAC;MACb,MAAM,EAAE;KACT,EACD;MACE,IAAI,EAAE,GAAG;MACT,OAAO,EAAE,EAAE;MACX,UAAU,EAAE,CAAC;MACb,MAAM,EAAE;KACT,EACD;MACE,IAAI,EAAE,GAAG;MACT,OAAO,EAAE,EAAE;MACX,UAAU,EAAE,CAAC;MACb,MAAM,EAAE;KACT,CACF;IAEL;EAEF;;EAEAC,OAAOA,CAAA;IACL,MAAMC,OAAO,GAAkB,IAAIjC,IAAI,EAAE;IACzCiC,OAAO,CAACC,QAAQ,GAAG,IAAI,CAACH,KAAM,CAACI,MAAM,GAAG,CAAC;IACzCF,OAAO,CAACG,IAAI,GAAG,SAASH,OAAO,CAACC,QAAQ,EAAE;IAC1C,IAAI,IAAI,CAACH,KAAK,KAAKM,SAAS,EAAE;MAC5B,IAAI,CAACN,KAAK,GAAG,EAAE;;IAEjB,IAAI,CAACA,KAAK,CAACO,IAAI,CAACL,OAAO,CAAC;IACxBM,OAAO,CAACC,GAAG,CAAC,IAAI,CAACT,KAAK,CAAC;EACzB;EAEAhB,kBAAkBA,CAAC0B,mBAAiC;IAClD,MAAMC,SAAS,GAAG,IAAI,CAACX,KAAM,CAACU,mBAAmB,CAACE,WAAW,CAAC,CAACC,KAAK,CAACC,MAAM,CAACJ,mBAAmB,CAACK,WAAW,EAAE,CAAC,CAAC;IAC/G,IAAI,CAACf,KAAM,CAACU,mBAAmB,CAACM,SAAS,CAAC,CAACH,KAAK,CAACC,MAAM,CAACJ,mBAAmB,CAACO,SAAS,EAAE,CAAC,EAAE,GAAGN,SAAS,CAAC;EACzG;EAEAO,SAASA,CAAA;IACP,MAAMC,UAAU,GAAG,IAAIjD,UAAU,EAAE;IACnCiD,UAAU,CAACnB,KAAK,GAAG,IAAI,CAACA,KAAM;IAC9B,IAAI,CAACR,YAAY,CAAC0B,SAAS,CAACC,UAAU,CAAC;EACzC;EAEAtC,UAAUA,CAACuC,SAAiB;IAC1B,IAAI,CAACpB,KAAM,CAACc,MAAM,CAACM,SAAS,EAAE,CAAC,CAAC;EAClC;;AAhEW9B,cAAc;mBAAdA,cAAc,EAAAnB,EAAA,CAAAkD,iBAAA,CAAAC,EAAA,CAAAC,YAAA,GAAApD,EAAA,CAAAkD,iBAAA,CAAAG,EAAA,CAAAC,WAAA;AAAA;AAAdnC,cAAc;QAAdA,cAAc;EAAAoC,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,wBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCb3B7D,EAAA,CAAAC,cAAA,aAAyE;MAErED,EAAA,CAAA+D,SAAA,aAA0B;MAC1B/D,EAAA,CAAAC,cAAA,aAAqE;MAC3DD,EAAA,CAAAE,UAAA,mBAAA8D,gDAAA;QAAA,OAASF,GAAA,CAAAf,SAAA,EAAW;MAAA,EAAC;MACT/C,EAAA,CAAAiE,MAAA,WAAI;MAAAjE,EAAA,CAAAc,YAAA,EAAS;MAGrCd,EAAA,CAAAC,cAAA,aAA0C;MAEtCD,EAAA,CAAA+D,SAAA,eAAkC;MACpC/D,EAAA,CAAAc,YAAA,EAAO;MACPd,EAAA,CAAAC,cAAA,aAA4D;MAC1DD,EAAA,CAAAkE,UAAA,KAAAC,mCAAA,sBAG4C;;MAC5CnE,EAAA,CAAAC,cAAA,eAA2F;MACpDD,EAAA,CAAAE,UAAA,mBAAAkE,6CAAA;QAAA,OAASN,GAAA,CAAAhC,OAAA,EAAS;MAAA,EAAC;MAAC9B,EAAA,CAAAiE,MAAA,uBAAe;MAAAjE,EAAA,CAAAc,YAAA,EAAK;;;MAT3Ed,EAAA,CAAAqE,SAAA,GAAwB;MAAxBrE,EAAA,CAAAe,UAAA,cAAA+C,GAAA,CAAAvC,UAAA,CAAwB;MAKDvB,EAAA,CAAAqE,SAAA,GAAiD;MAAjDrE,EAAA,CAAAe,UAAA,YAAAf,EAAA,CAAAsE,WAAA,QAAAR,GAAA,CAAAjC,KAAA,EAAAiC,GAAA,CAAAvC,UAAA,CAAAgD,KAAA,CAAA9C,MAAA,EAAiD","names":["List","BoardModel","i0","ɵɵelementStart","ɵɵlistener","BoardComponent_app_list_10_Template_app_list_deleteList_0_listener","$event","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","deleteList","BoardComponent_app_list_10_Template_app_list_moveCardAcrossList_0_listener","ctx_r5","moveCardAcrossList","ɵɵelementEnd","ɵɵproperty","i_r2","list_r1","ɵɵattribute","BoardComponent","constructor","localService","formBuilder","searchForm","group","search","ngOnInit","board","getBoard","lists","addList","newList","position","length","name","undefined","push","console","log","movementInformation","cardMoved","fromListIdx","cards","splice","fromCardIdx","toListIdx","toCardIdx","saveBoard","boardModel","listIndex","ɵɵdirectiveInject","i1","LocalService","i2","FormBuilder","selectors","decls","vars","consts","template","BoardComponent_Template","rf","ctx","ɵɵelement","BoardComponent_Template_button_click_4_listener","ɵɵtext","ɵɵtemplate","BoardComponent_app_list_10_Template","BoardComponent_Template_h6_click_13_listener","ɵɵadvance","ɵɵpipeBind2","value"],"sourceRoot":"","sources":["/Users/mac/Desktop/kanban-angular/src/app/components/board/board/board.component.ts","/Users/mac/Desktop/kanban-angular/src/app/components/board/board/board.component.html"],"sourcesContent":["import { Component, NgModule, OnInit } from '@angular/core';\nimport { List, ListInterface } from '../../../model/list/list.model';\nimport { MovementIntf } from 'src/app/model/card/movement';\nimport { BoardService } from '../../../service/board/board-service';\nimport { BoardModel } from '../../../model/board/board.model';\nimport { LocalService } from '../../../service/board/local/local.service';\nimport {FormBuilder} from \"@angular/forms\";\n\n@Component({\n  selector: 'app-board',\n  templateUrl: './board.component.html',\n  styleUrls: ['./board.component.css'],\n})\nexport class BoardComponent implements OnInit {\n\n\n  lists: ListInterface[] | undefined;\n  searchForm: any;\n\n  constructor(private localService: LocalService, private formBuilder: FormBuilder) {\n    this.searchForm = this.formBuilder.group({\n      search: '',\n    });\n  }\n\n  ngOnInit() {\n\n    const board = this.localService.getBoard();\n    this.lists = board.lists ||[\n          {\n            \"id\": '1',\n            \"cards\": [],\n            \"position\": 1,\n            \"name\": \"Todo\"\n          },\n          {\n            \"id\": '2',\n            \"cards\": [],\n            \"position\": 2,\n            \"name\": \"InProgress\"\n          },\n          {\n            \"id\": '3',\n            \"cards\": [],\n            \"position\": 3,\n            \"name\": \"Completed\"\n          }\n        ];\n\n    // ideally retrive and initialize from some storage.\n\n  }\n\n  addList() {\n    const newList: ListInterface = new List();\n    newList.position = this.lists!.length + 1;\n    newList.name = `List #${newList.position}`;\n    if (this.lists === undefined) {\n      this.lists = [];\n    }\n    this.lists.push(newList);\n    console.log(this.lists)\n  }\n\n  moveCardAcrossList(movementInformation: MovementIntf) {\n    const cardMoved = this.lists![movementInformation.fromListIdx].cards.splice(movementInformation.fromCardIdx, 1);\n    this.lists![movementInformation.toListIdx].cards.splice(movementInformation.toCardIdx, 0, ...cardMoved);\n  }\n\n  saveBoard() {\n    const boardModel = new BoardModel();\n    boardModel.lists = this.lists!;\n    this.localService.saveBoard(boardModel);\n  }\n\n  deleteList(listIndex: number) {\n    this.lists!.splice(listIndex, 1);\n  }\n}\n","<div class=\"container\" style=\"max-width:inherit;width:auto;height:100%;\">\n  <div class=\"row\">\n    <div class=\"col-11\"></div>\n    <div class=\"flex justify-content-end align-content-center py-3 pr-5\">\n      <button (click)=\"saveBoard()\" class=\"bg-blue-600 text-white py-2 px-3 border-round-md  outline-none\"\n        style=\"border: 0\">Save</button>\n    </div>\n  </div>\n  <div class=\"card\" style=\"height:inherit;\">\n    <form [formGroup]=\"searchForm\">\n      <input formControlName=\"search\" />\n    </form>\n    <div class=\"flex gap-3 card-container overflow-x-auto\tpb-4\">\n      <app-list (deleteList)=\"deleteList($event)\" (moveCardAcrossList)=\"moveCardAcrossList($event)\"\n                *ngFor=\"let list of lists| searchFilter: searchForm.value.search; let i = index\"\n                [listIndex]=\"i\" [list]=\"list\"\n                attr.listIndex=\"{{i}}\"></app-list>\n      <div class=\"flex-1\" style=\"margin:10px;padding:15px;padding-top:15px;padding-bottom:15px;\">\n        <h6 class=\"text-center add-new-list\" (click)=\"addList()\">Add new item...</h6>\n      </div>\n    </div>\n  </div>\n\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}